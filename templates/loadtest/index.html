{% extends 'base.html' %}
{% load  staticfiles %}
{% block title %}
    主页
{% endblock %}

{% block body %}
    <nav class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="{% url 'loadtest:product' %}">soloπ性能测试数据界面化工具</a>
            </div>
        </div>
    </nav>
    <div class="container">
        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <div{% if message.tags %} class="alert alert-{{ message.tags }}"{% endif %}>{{ message }}</div>
                {% endfor %}
            </ul>
        {% endif %}
        <div class="col">
            <form class="form-inline" enctype="multipart/form-data" role="form"
                  action="{% url "loadtest:index" product.id %}"
                  method="post">
                {% csrf_token %}
                <div class="form-group">
                    <span class="label label-primary">项目名称:{{ product.name }}</span>
                </div>
                <div class="form-group">
                    <label class="sr-only" for="inputfile">文件输入</label>
                    <input type="file" id="inputfile" name="inputfile" multiple="multiple" autofocus="autofocus">
                </div>
                <button type="submit" class="btn btn-default">提交</button>
            </form>
        </div>
        <div class="table-responsive">

            <table class="table table-hover">
                <thead>
                <tr>
                    <th>所属项目</th>
                    <th>文件名称</th>
                    <th>文件路径</th>
                    <th>创建时间</th>
                </tr>
                </thead>
                <tbody>
                {% if all_path %}
                    {% for path in all_path %}
                        <tr>
                            <th>{{ path.product }}</th>
                            <th>{{ path.filename }}</th>
                            <th>{{ path.filepath }}</th>
                            <th>{{ path.created_time }}</th>
                            <th><a href="{% url 'loadtest:chart' path.filepath %}">查看结果</a></th>
                        </tr>
                    {% endfor %}
                {% endif %}
                </tbody>

            </table>
        </div>
        <ul class="pagination pagination-lg">
            {% if all_path.has_previous %}
                <li><a href="?page={{ all_path.previous_page_number }}">上一页</a></li>
            {% endif %}
                <li>&laquo;{{ all_path.number }}/{{ all_path.paginator.num_pages }}&raquo;</li>
            {% if all_path.has_next %}
                <li><a href="?page={{ all_path.next_page_number }}">下一页</a></li>
            {% endif %}
        </ul>

    </div>
{% endblock %}
